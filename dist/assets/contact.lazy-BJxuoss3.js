var w=e=>{throw TypeError(e)};var C=(e,t,s)=>t.has(e)||w("Cannot "+s);var n=(e,t,s)=>(C(e,t,"read from private field"),s?s.call(e):t.get(e)),p=(e,t,s)=>t.has(e)?w("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),b=(e,t,s,i)=>(C(e,t,"write to private field"),i?i.call(e,s):t.set(e,s),s),f=(e,t,s)=>(C(e,t,"access private method"),s);import{S as N,s as F,m as M,o as L,e as K,u as T,g as y,k as U,l as _,j as a,h as q}from"./index-uhBez7EL.js";import{n as I,s as P}from"./utils-km2FGkQ4.js";var c,l,r,u,h,v,O,k,$=(k=class extends N{constructor(t,s){super();p(this,h);p(this,c);p(this,l);p(this,r);p(this,u);b(this,c,t),this.setOptions(s),this.bindMethods(),f(this,h,v).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const s=this.options;this.options=n(this,c).defaultMutationOptions(t),F(this.options,s)||n(this,c).getMutationCache().notify({type:"observerOptionsUpdated",mutation:n(this,r),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&M(s.mutationKey)!==M(this.options.mutationKey)?this.reset():((i=n(this,r))==null?void 0:i.state.status)==="pending"&&n(this,r).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=n(this,r))==null||t.removeObserver(this)}onMutationUpdate(t){f(this,h,v).call(this),f(this,h,O).call(this,t)}getCurrentResult(){return n(this,l)}reset(){var t;(t=n(this,r))==null||t.removeObserver(this),b(this,r,void 0),f(this,h,v).call(this),f(this,h,O).call(this)}mutate(t,s){var i;return b(this,u,s),(i=n(this,r))==null||i.removeObserver(this),b(this,r,n(this,c).getMutationCache().build(n(this,c),this.options)),n(this,r).addObserver(this),n(this,r).execute(t)}},c=new WeakMap,l=new WeakMap,r=new WeakMap,u=new WeakMap,h=new WeakSet,v=function(){var s;const t=((s=n(this,r))==null?void 0:s.state)??L();b(this,l,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},O=function(t){K.batch(()=>{var s,i,o,x,m,S,j,E;if(n(this,u)&&this.hasListeners()){const d=n(this,l).variables,g=n(this,l).context;(t==null?void 0:t.type)==="success"?((i=(s=n(this,u)).onSuccess)==null||i.call(s,t.data,d,g),(x=(o=n(this,u)).onSettled)==null||x.call(o,t.data,null,d,g)):(t==null?void 0:t.type)==="error"&&((S=(m=n(this,u)).onError)==null||S.call(m,t.error,d,g),(E=(j=n(this,u)).onSettled)==null||E.call(j,void 0,t.error,d,g))}this.listeners.forEach(d=>{d(n(this,l))})})},k);function z(e,t){const s=T(),[i]=y.useState(()=>new $(s,e));y.useEffect(()=>{i.setOptions(e)},[i,e]);const o=y.useSyncExternalStore(y.useCallback(m=>i.subscribe(K.batchCalls(m)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),x=y.useCallback((m,S)=>{i.mutate(m,S).catch(I)},[i]);if(o.error&&P(i.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:x,mutateAsync:o.mutate}}async function A(e,t,s){const i=await fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,message:s})});if(!i.ok)throw new Error("Network response was not ok. Send help!");return await i.json()}const H=U("/contact")({component:J});function J(){const e=_.c(5);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={mutationFn:Q},e[0]=t):t=e[0];const s=z(t);let i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("h2",{children:"Contact"}),e[1]=i):i=e[1];let o;return e[2]!==s.isSuccess||e[3]!==s.mutate?(o=a.jsxs("div",{className:"contact",children:[i,s.isSuccess?a.jsx("h3",{children:"Submitted"}):a.jsxs("form",{action:s.mutate,children:[a.jsx(R,{type:"text",name:"name",placeholder:"Name"}),a.jsx(R,{name:"email",placeholder:"Email"}),a.jsx("textarea",{name:"message",placeholder:"Message"}),a.jsx("button",{type:"submit",children:"Submit"})]})]}),e[2]=s.isSuccess,e[3]=s.mutate,e[4]=o):o=e[4],o}function Q(e){return A(e.get("name"),e.get("email"),e.get("message"))}function R(e){const t=_.c(5),{pending:s}=q.useFormStatus();let i;return t[0]!==s||t[1]!==e.name||t[2]!==e.placeholder||t[3]!==e.type?(i=a.jsx("input",{disabled:s,name:e.name,type:e.type,placeholder:e.placeholder}),t[0]=s,t[1]=e.name,t[2]=e.placeholder,t[3]=e.type,t[4]=i):i=t[4],i}export{H as Route};
