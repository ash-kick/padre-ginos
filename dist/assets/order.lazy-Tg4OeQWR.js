import{l as X,j as s,k as Z,g as L,C as ee}from"./index-uhBez7EL.js";const te=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"});function se(e){const t=X.c(15),{cart:o,checkout:i}=e;let m=0;for(let u=0;u<o.length;u++){const x=o[u];m=m+x.pizza.sizes[x.size]}let a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("h2",{children:"Cart"}),t[0]=a):a=t[0];let l;t[1]!==o?(l=o.map(ie),t[1]=o,t[2]=l):l=t[2];let p;t[3]!==l?(p=s.jsx("ul",{children:l}),t[3]=l,t[4]=p):p=t[4];let n;t[5]!==m?(n=te.format(m),t[5]=m,t[6]=n):n=t[6];let z;t[7]!==n?(z=s.jsxs("p",{children:["Total: ",n]}),t[7]=n,t[8]=z):z=t[8];let c;t[9]!==i?(c=s.jsx("button",{onClick:i,children:"Checkout"}),t[9]=i,t[10]=c):c=t[10];let h;return t[11]!==p||t[12]!==z||t[13]!==c?(h=s.jsxs("div",{className:"cart",children:[a,p,z,c]}),t[11]=p,t[12]=z,t[13]=c,t[14]=h):h=t[14],h}function ie(e,t){return s.jsxs("li",{children:[s.jsxs("span",{className:"size",children:[e.size," - "]}),s.jsxs("span",{className:"name",children:[e.pizza.name," - "]}),s.jsx("span",{className:"price",children:e.price})]},t)}const le=e=>{const t=X.c(11);let o;t[0]!==e.name?(o=s.jsx("h1",{children:e.name}),t[0]=e.name,t[1]=o):o=t[1];let i;t[2]!==e.description?(i=s.jsx("p",{children:e.description}),t[2]=e.description,t[3]=i):i=t[3];const m=e.image?e.image:"https://picsum.photos/200";let a;t[4]!==e.name||t[5]!==m?(a=s.jsx("img",{src:m,alt:e.name}),t[4]=e.name,t[5]=m,t[6]=a):a=t[6];let l;return t[7]!==o||t[8]!==i||t[9]!==a?(l=s.jsxs("div",{className:"pizza",children:[o,i,a]}),t[7]=o,t[8]=i,t[9]=a,t[10]=l):l=t[10],l},ae=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),oe=Z("/order")({component:ne});function ne(){const e=X.c(69),[t,o]=L.useState("pepperoni"),[i,m]=L.useState("M");let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[l,p]=L.useState(a),[n,z]=L.useState(!0),[c,h]=L.useContext(ee);let u;e[1]!==c||e[2]!==h?(u=async function(){z(!0),await fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:c})}),h([]),z(!1)},e[1]=c,e[2]=h,e[3]=u):u=e[3];const x=u;let f,d;if(e[4]!==n||e[5]!==i||e[6]!==t||e[7]!==l){if(!n){let r;e[10]!==t?(r=W=>t===W.id,e[10]=t,e[11]=r):r=e[11],d=l.find(r),f=ae.format(d.sizes?d.sizes[i]:"")}e[4]=n,e[5]=i,e[6]=t,e[7]=l,e[8]=f,e[9]=d}else f=e[8],d=e[9];let O;e[12]===Symbol.for("react.memo_cache_sentinel")?(O=[],e[12]=O):O=e[12],L.useEffect(()=>{Y()},O);let R;e[13]!==c||e[14]!==i||e[15]!==f||e[16]!==d||e[17]!==h?(R=function(){h([...c,{pizza:d,size:i,price:f}])},e[13]=c,e[14]=i,e[15]=f,e[16]=d,e[17]=h,e[18]=R):R=e[18];const H=R;async function Y(){const W=await(await fetch("/api/pizzas")).json();p(W),z(!1)}let w;e[19]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("h2",{children:"Create Order"}),e[19]=w):w=e[19];let $,D;e[20]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("label",{htmlFor:"pizza-type",children:"Pizza Type"}),D=r=>o(r.target.value),e[20]=$,e[21]=D):($=e[20],D=e[21]);let j;e[22]!==l?(j=l.map(ce),e[22]=l,e[23]=j):j=e[23];let y;e[24]!==t||e[25]!==j?(y=s.jsxs("div",{children:[$,s.jsx("select",{onChange:D,name:"pizza-type",value:t,children:j})]}),e[24]=t,e[25]=j,e[26]=y):y=e[26];let E,I;e[27]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("label",{htmlFor:"pizza-size",children:"Pizza Size"}),E=r=>m(r.target.value),e[27]=E,e[28]=I):(E=e[27],I=e[28]);const K=i==="S";let S;e[29]!==K?(S=s.jsx("input",{onChange:E,checked:K,type:"radio",name:"pizza-size",value:"S",id:"pizza-s"}),e[29]=K,e[30]=S):S=e[30];let M;e[31]===Symbol.for("react.memo_cache_sentinel")?(M=s.jsx("label",{htmlFor:"pizza-s",children:"Small"}),e[31]=M):M=e[31];let _;e[32]!==S?(_=s.jsxs("span",{children:[S,M]}),e[32]=S,e[33]=_):_=e[33];let U;e[34]===Symbol.for("react.memo_cache_sentinel")?(U=r=>m(r.target.value),e[34]=U):U=e[34];const Q=i==="M";let b;e[35]!==Q?(b=s.jsx("input",{onChange:U,checked:Q,type:"radio",name:"pizza-size",value:"M",id:"pizza-m"}),e[35]=Q,e[36]=b):b=e[36];let A;e[37]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx("label",{htmlFor:"pizza-m",children:"Medium"}),e[37]=A):A=e[37];let g;e[38]!==b?(g=s.jsxs("span",{children:[b,A]}),e[38]=b,e[39]=g):g=e[39];let G;e[40]===Symbol.for("react.memo_cache_sentinel")?(G=r=>m(r.target.value),e[40]=G):G=e[40];const V=i==="L";let v;e[41]!==V?(v=s.jsx("input",{onChange:G,checked:V,type:"radio",name:"pizza-size",value:"L",id:"pizza-l"}),e[41]=V,e[42]=v):v=e[42];let J;e[43]===Symbol.for("react.memo_cache_sentinel")?(J=s.jsx("label",{htmlFor:"pizza-l",children:"Large"}),e[43]=J):J=e[43];let C;e[44]!==v?(C=s.jsxs("span",{children:[v,J]}),e[44]=v,e[45]=C):C=e[45];let N;e[46]!==_||e[47]!==g||e[48]!==C?(N=s.jsxs("div",{children:[I,s.jsxs("div",{children:[_,g,C]})]}),e[46]=_,e[47]=g,e[48]=C,e[49]=N):N=e[49];let q;e[50]===Symbol.for("react.memo_cache_sentinel")?(q=s.jsx("button",{type:"submit",children:"Add to Cart"}),e[50]=q):q=e[50];let T;e[51]!==N||e[52]!==y?(T=s.jsxs("div",{children:[y,N,q]}),e[51]=N,e[52]=y,e[53]=T):T=e[53];let k;e[54]!==n||e[55]!==f||e[56]!==d?(k=n?s.jsx("h3",{children:"LOADING …"}):s.jsxs("div",{className:"order-pizza",children:[s.jsx(le,{name:d.name,description:d.description,image:d.image}),s.jsx("p",{children:f})]}),e[54]=n,e[55]=f,e[56]=d,e[57]=k):k=e[57];let P;e[58]!==H||e[59]!==T||e[60]!==k?(P=s.jsxs("div",{className:"order",children:[w,s.jsxs("form",{action:H,children:[T,k]})]}),e[58]=H,e[59]=T,e[60]=k,e[61]=P):P=e[61];let F;e[62]!==c||e[63]!==x||e[64]!==n?(F=n?s.jsx("h2",{children:"LOADING …"}):s.jsx(se,{checkout:x,cart:c}),e[62]=c,e[63]=x,e[64]=n,e[65]=F):F=e[65];let B;return e[66]!==P||e[67]!==F?(B=s.jsxs("div",{className:"order-page",children:[P,F]}),e[66]=P,e[67]=F,e[68]=B):B=e[68],B}function ce(e){return s.jsx("option",{value:e.id,children:e.name},e.id)}export{oe as Route};
